// ============================================
// ğŸ¯ ì§„ì… ì´ê²©ë„ ì œí•œ / Advanced Disparity(ì´ê²©ë„) Index
// ============================================
emaPeriod = input.int(15, title="EMA Period", inline = 'di1', group='Entry Limit Filter : by Advanced Disparity State', tooltip='Disparity(ì´ê²©ë„) ëŒ€ë¹„ ê°€ê²©ì´ ë„ˆë¬´ ë†’ìœ¼ë©´ ì§„ì… ì°¨ë‹¨')
lookbackPeriod_ma = input.int(14, title="Lookback Period", inline = 'di1', group='Entry Limit Filter : by Advanced Disparity State')
overBought_ma = input.float(92, title="Overbought Level", inline = 'di2', group='Entry Limit Filter : by Advanced Disparity State')
overSold_ma = input.float(10, title="Oversold Level", inline = 'di2', group='Entry Limit Filter : by Advanced Disparity State', tooltip='70~100 ì´ìƒ ë¡± í¬ì§€ì…˜ ì§„ì… ì°¨ë‹¨ / 30~0 ì´í•˜ ìˆ í¬ì§€ì…˜ ì§„ì… ì°¨ë‹¨')
smoothingPeriod_ma = input.int(9, title="Smoothing Period", inline = 'di3', group='Entry Limit Filter : by Advanced Disparity State')
smoothingType_ma = input.string(title="Smoothing Type", defval="EMA", options=["EMA", "SMA"], inline = 'di3', group='Entry Limit Filter : by Advanced Disparity State')

// ============================================
// ğŸ¯ Advanced Disparity(ì´ê²©ë„) Index
// ============================================
price = close
emaValue = ta.ema(price, emaPeriod)
disparityIndex = (price - emaValue) / emaValue * 100
highestHigh = ta.highest(disparityIndex, lookbackPeriod_ma)
lowestLow = ta.lowest(disparityIndex, lookbackPeriod_ma)
range_ = highestHigh - lowestLow
scaledDisparityIndex = nz(range_) == 0 ? 0 : (disparityIndex - lowestLow) / range_ * 100
smoothedDisparityIndex = switch smoothingType_ma
    "EMA" => ta.ema(scaledDisparityIndex, smoothingPeriod_ma)
    "SMA" => ta.sma(scaledDisparityIndex, smoothingPeriod_ma)
    => na
Limit_L = (smoothedDisparityIndex < overBought_ma)
Limit_S = (smoothedDisparityIndex > overSold_ma)
high_volatility = (smoothedDisparityIndex > overBought_ma) or (smoothedDisparityIndex < overSold_ma)




// ============================================
// ğŸ¯ ì§„ì… ì´ê²©ë„ ì œí•œ(MAê¸°ì¤€ì„  ë°©ì‹)
// ============================================
long_limit = input.float(9.0, 'ë¡± ì§„ì…ì œí•œ %', minval=0.0, step=0.1, inline='entlimit', group='ì§„ì…ì œí•œ: ì§„ì… ì´ê²©ë„ ì œí•œ', tooltip='SuperTrend ëŒ€ë¹„ ê°€ê²©ì´ ë„ˆë¬´ ë†’ìœ¼ë©´ ì§„ì… ì°¨ë‹¨') / 100
short_limit = input.float(13.4, ' ìˆ ì§„ì…ì œí•œ %', minval=0.0, step=0.1, inline='entlimit', group='ì§„ì…ì œí•œ: ì§„ì… ì´ê²©ë„ ì œí•œ') / 100

long_limit_cond = close < x * (1 + long_limit) //'X'ëŠ” ë¹„êµ ê¸°ì¤€ ì„ 
short_limit_cond = close > x * (1 - short_limit) //'X'ëŠ” ë¹„êµ ê¸°ì¤€ ì„ 

// ============================================
// ğŸ’° ì´ê²©ë„ ì œí•œ ì¡°ê±´(MAê¸°ì¤€ì„  ë°©ì‹)
// ============================================
long_limit_cond = close < x * (1 + long_limit)
short_limit_cond = close > x * (1 - short_limit)
